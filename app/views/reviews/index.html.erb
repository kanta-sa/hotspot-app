<div class="review-container">
  <div class="review-header-wrapper">
    <div class="left">
      <%= image_tag @post.image.to_s, class: "post-image" %>
    </div>
    <div class="right">
      <div class="post-name">
        <%= @post.name %>
      </div>
      <div id="review-score">
        <%= render 'reviews/score', post: @post %>
      </div>
      <%= render 'reviews/form', review: @review, post: @post %>
    </div>
  </div>
  
  <div id="review-items-wrapper">
    <%= render 'reviews/reviews', reviews: @reviews %>
  </div>
</div>

<script type="text/javascript">
  var stars = document.querySelector(".ratings").children;
  var ratingValue = document.getElementById("rating-value");
  var ratingValueDisplay = document.getElementById("rating-value-display");
  
  var index;
  for (let i=0; i<stars.length; i++){
    stars[i].addEventListener("mouseover", function(){
      for(let j=0; j<stars.length; j++){ //星を全部くり抜く
        stars[j].classList.remove("fa-star");
        stars[j].classList.add("fa-star-o");
      }
      for(let j=0; j<=i; j++){
        stars[j].classList.remove("fa-star-o");
        stars[j].classList.add("fa-star");
      }
    });
    
    stars[i].addEventListener("click", function(){
      ratingValue.value = i+1;
      ratingValueDisplay.textContent = ratingValue.value;
      index = i;
    });
    
    stars[i].addEventListener("mouseout", function(){
      for(let j=0; j<stars.length; j++){ //星を全部くり抜く
        stars[j].classList.remove("fa-star");
        stars[j].classList.add("fa-star-o");
      }
      for(let j=0; j<=index; j++){
        stars[j].classList.remove("fa-star-o");
        stars[j].classList.add("fa-star");
      }
    });
  }  
</script>